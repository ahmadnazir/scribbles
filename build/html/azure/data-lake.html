

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Azure Data Lake &mdash; Scribbles 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Azure Key Vault" href="resources.html" />
    <link rel="prev" title="Az Module (Powershell) vs az cli" href="az-powershell-vs-azcli.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Scribbles
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../emacs.html">(Spac)emacs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../provision.html">Package Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../restructuredtext.html">ReStructuredText Markup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualstudio.html">Visual studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../agile.html">Agile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ai.html">AI</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../azure.html">Azure</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="az-powershell-vs-azcli.html">Az Module (Powershell) vs az cli</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Azure Data Lake</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#extents">Extents</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vertices">Vertices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#azure-data-lake-accounts">Azure Data Lake Accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#partitioning">Partitioning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#distribution-scheme">Distribution Scheme</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-lake-gen1-vs-gen2">Data Lake Gen1 vs Gen2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="resources.html">Azure Key Vault</a></li>
<li class="toctree-l2"><a class="reference internal" href="service-fabric.html">Azure Service Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="wasb.html">WASB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../business.html">Business</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clojure.html">Clojure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clojurescript.html">Clojurescript</a></li>
<li class="toctree-l1"><a class="reference internal" href="../courses.html">Courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../csharp.html">C #</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dotnet.html">.NET</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../identity.html">Identity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java.html">Java</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs.html">Jobs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kubernetes.html">Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc.html">Misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notes.html">Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shell.html">Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scala.html">Scala</a></li>
<li class="toctree-l1"><a class="reference internal" href="../spark.html">Spark</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rust.html">Rust</a></li>
<li class="toctree-l1"><a class="reference internal" href="../talks.html">Talks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web.html">Web</a></li>
<li class="toctree-l1"><a class="reference internal" href="../people.html">People</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Scribbles</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../azure.html">Azure</a> &raquo;</li>
        
      <li>Azure Data Lake</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/azure/data-lake.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="azure-data-lake">
<h1>Azure Data Lake<a class="headerlink" href="#azure-data-lake" title="Permalink to this headline">¶</a></h1>
<p>Azure data lake can be used to store any type of data whether it is:</p>
<ul class="simple">
<li><strong>Unstructured data</strong> json, txt, csv, you name it</li>
<li><strong>Semi-structured data</strong>: json or xml, along with schema definition that is read at run-time</li>
<li><strong>Structured data</strong>: databases</li>
</ul>
<p>Azure Data Lake helps users to take the LET (Load Extract Transform) approach instead of the ETL approach (Extract Transform Load).</p>
<p>SQL language that you can use with Azure Data Lake is U-SQL (hybrid of T-SQL and C#). Extensible and modules can be written using C#.</p>
<p>Data Lakes sit on HDFS.</p>
<p>Azure data lake databases are not relational. Relationships are virtual.</p>
<p><strong>Data Skew</strong> happens when data is partitioned in a what that one or more vertices have significantly more work to do than other vertices.</p>
<div class="section" id="extents">
<h2>Extents<a class="headerlink" href="#extents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>When uploading data, the file is split into <strong>Extents</strong></li>
<li>usually 250MB</li>
<li>Normally, replicated 3 times</li>
</ul>
</div>
<div class="section" id="vertices">
<h2>Vertices<a class="headerlink" href="#vertices" title="Permalink to this headline">¶</a></h2>
<p>U-SQL jobs are processed by vertices
- A vertix is a virtual machine (dual core processor and 6GB RAM - at the point of writing)
- Each vertix performs a particular task
- Each vertix works on around 1 GB of data
- resulting in about 4 Extents
- A job normally used 5 vertices to execute the task. This number is configurable.
- A vertex must complete in 5 hours
- Maximum memory : 5 GB</p>
</div>
<div class="section" id="azure-data-lake-accounts">
<h2>Azure Data Lake Accounts<a class="headerlink" href="#azure-data-lake-accounts" title="Permalink to this headline">¶</a></h2>
<p>Consists of:</p>
<ul class="simple">
<li>Store account</li>
<li>Analytics account</li>
</ul>
<p>Azure Data Lake Analytics can also query data in other stores e.g. Azure Blob Storage, SQL Server in Azure etc.</p>
</div>
<div class="section" id="partitioning">
<h2>Partitioning<a class="headerlink" href="#partitioning" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Horizontal</strong></li>
</ul>
<p>Also known as:</p>
<ul class="simple">
<li>sharding</li>
<li>fine grained partitioning</li>
<li>automatic partitioning</li>
</ul>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Metropolitan</span>
<span class="n">North</span> <span class="n">Wales</span>
<span class="n">Manchester</span>
</pre></div>
</div>
<ul class="simple">
<li><strong>Vertical</strong> (coarse grained partitioning or manual partitioning)</li>
</ul>
<p>Also known as:</p>
<ul class="simple">
<li>coarse grained partitioning</li>
<li>manual partitioning</li>
</ul>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Metropolitan</span>  <span class="o">|</span> <span class="n">North</span> <span class="n">Wales</span> <span class="o">|</span> <span class="n">Manchester</span>
<span class="n">Metropolitan</span>  <span class="o">|</span>             <span class="o">|</span> <span class="n">Manchester</span>
              <span class="o">|</span>             <span class="o">|</span> <span class="n">Manchester</span>
</pre></div>
</div>
<p>Normalization can also be used to do vertical partitioning but this goes one step further and can be used to partition data that is already normalized (for reasons like performance, availability, etc).</p>
<ul class="simple">
<li><strong>Functional</strong></li>
</ul>
<p>Data is grouped according to how it is used by each bounded context e.g. for an e-commerce system partition invoice data and product inventory data</p>
<p>MS recommends that partition size should be 1GB in size for maximum performance</p>
</div>
<div class="section" id="distribution-scheme">
<h2>Distribution Scheme<a class="headerlink" href="#distribution-scheme" title="Permalink to this headline">¶</a></h2>
<p>Partitioning determines how the data is stored. Distribution determines where the data is stored and you can control that when working with Databases/U-SQL.</p>
<p>In Azure Data Lake, distribution means how horizontal partitioning separates the data.</p>
<p>4 ways to horizontally partition the data:</p>
<ul class="simple">
<li>Hash Keys: Data Lake hashes the values and distributes the data based on the hash value</li>
<li>Direct Hash: We are responsible for providing a numeric value and then generate a hash value using an analytics function like rank or dense rank. More control this way.</li>
<li>Range Keys</li>
<li>Round robin: no keys are needed. Data is distributed evenly.</li>
</ul>
<p>Data skew can happen with hash keys, direct hash, and range keys. Round robin fixes this but can lead to more data reads as the data might not be sitting together.</p>
</div>
<div class="section" id="data-lake-gen1-vs-gen2">
<h2>Data Lake Gen1 vs Gen2<a class="headerlink" href="#data-lake-gen1-vs-gen2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Gen1 is basically HDFS on the cloud</li>
<li>Gen2 is Azure Blob storage on HDFS</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="resources.html" class="btn btn-neutral float-right" title="Azure Key Vault" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="az-powershell-vs-azcli.html" class="btn btn-neutral float-left" title="Az Module (Powershell) vs az cli" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Ahmad Nazir Raja

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>